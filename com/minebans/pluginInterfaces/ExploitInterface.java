package com.minebans.pluginInterfaces;

import com.minebans.MineBans;
import com.minebans.bans.BanReason;
import com.minebans.pluginInterfaces.nocheat.NoCheatPluginInterface;

public class ExploitInterface {
	
	private ExploitPluginInterface pluginInterface;
	
	public ExploitInterface(MineBans plugin){
		if (plugin.pluginManager.isPluginEnabled("NoCheat")){
			this.pluginInterface = new NoCheatPluginInterface(plugin);
		}else{
			plugin.log.warn("A suitable exploit detection plugin was not found.");
			plugin.log.warn("It is strongly recomended that you install a plugin such as NoCheat");
			plugin.log.warn("this will be used to calculate the severity of any bans you make.");
		}
		
		if (this.foundExploitPlugin()){
			plugin.log.info("Using " + this.pluginInterface.getPluginName() + " for exploit data, checking config.");
			
			if (this.pluginInterface.checkConfig() == false){
				plugin.log.fatal(this.pluginInterface.getPluginName() + " minimum config was not met.");
			}
		}
	}
	
	public boolean foundExploitPlugin(){
		return (this.pluginInterface != null);
	}
	
	public Long getMaxViolationLevel(String playerName, BanReason reason){
		if (this.foundExploitPlugin() == false){
			return null;
		}
		
		return this.pluginInterface.getMaxViolationLevel(playerName, reason);
	}
	
}
